<lift:surround with="default" at="content">
  	<form id="content" lift="Interpret.render" method="POST" class="full">

  		<div id="code-wrap">
			<label for="code">Code</label>
  			<textarea name="code" lift="Interpret.code" id="code"></textarea>
			
  			<div id="controls">
			
  				<button id="eval" class="btn btn-success btn-large" type="submit" name="action" value="Eval">
    					<i class="icon-play icon-white"></i> Run
  				</button>

  			</div>
  		</div>
  		<hr id="vertical-resize-handle" draggable>
  		<div id="result-wrap">
			<label for="result">Result</label>
  			<textarea lift="Interpret.eval" id="result"></textarea>
  		</div>
	</form>
	
	<lift:tail>
		<script src="/vendors/CodeMirror2/codemirror.js"></script>
		<script src="/vendors/CodeMirror2/clike.js"></script>
		<script src="/vendors/MooTools/mootools-core-1.4.5-full-compat-yc.js"></script>
		<script src="/vendors/MooTools/mootools-more-1.4.0.1.js"></script>
		<script src="/js/fullscreen.js"></script>
		<script src="/js/resize.js"></script>
		<script>
			$(function(){
				
				$(document).click( function(){
					$('label[for="code"]').fadeOut( );
					$('label[for="result"]').fadeOut( );
				});
				
				window.codeMirror = CodeMirror.fromTextArea(document.getElementById("code"), {
					lineNumbers: true,
					matchBrackets: true,
					autofocus: true,
					theme: "ambiance",
					mode: "text/x-scala"
				});
	
				window.resultMirror = CodeMirror.fromTextArea(document.getElementById("result"), {
			   	lineNumbers: false,
			   	matchBrackets: true,
			   	theme: "ambiance",
			   	mode: "text/x-scala",
			   	readOnly: true
			  	});
			  
				$(document).keydown( function( e ) {
					if( e.keyCode == 13 && ( e.ctrlKey || e.metaKey ) ) { // ctrl + enter => run
						$('#eval').trigger('click');
						e.preventDefault();
					}
				});
			});
		</script>
	</lift:tail>
</lift:surround>