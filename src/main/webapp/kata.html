<lift:surround with="default" at="content">
  	<form lift="Interpret.render" method="POST" class="full">

  		<div id="code-wrap">
  			<textarea name="code" lift="Interpret.code" id="code"></textarea>
			
  			<div id="controls">
			
  				<button id="eval" class="btn btn-success btn-large" type="submit" name="action" value="Eval">
    					<i class="icon-play icon-white"></i> Run
  				</button>

  			</div>
  		</div>
  		
  		<div id="result-wrap">
  			<textarea lift="Interpret.eval" id="result"></textarea>
  		</div>
  		
  		<input type="hidden" name="eval">
	</form>
	
	<lift:tail>
		<script src="/vendors/CodeMirror2/codemirror.js"></script>
		<script src="/vendors/CodeMirror2/clike.js"></script>
		<script>
		  $(function(){
			  window.codeMirror = CodeMirror.fromTextArea(document.getElementById("code"), {
			    lineNumbers: true,
			    matchBrackets: true,
			    theme: "ambiance",
			    mode: "text/x-scala"
			  });
	
			  window.resultMirror = CodeMirror.fromTextArea(document.getElementById("result"), {
			    lineNumbers: false,
			    matchBrackets: true,
			    theme: "ambiance",
			    mode: "text/x-scala",
			    readOnly: true
			  });
			  
			  $(document).keydown( function( e ) {
				  if( e.keyCode == 13 && ( e.ctrlKey || e.metaKey ) ) { // ctrl + enter => run
			            $('#eval').trigger('click');
				  		e.preventDefault();
			        }
			  });
		  });
		</script>
	</lift:tail>
</lift:surround>